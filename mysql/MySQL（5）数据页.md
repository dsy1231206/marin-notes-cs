# MySQL（5）数据页

###### 记录是按【行】来存储的，但是数据库的读取却不以【行】为单位，否则一次读取就是一次I/O操作

##### 因此，InnoDB的数据是按【数据页】为单位来读写的，当需要读取一条记录的时候，并不是将这个记录本身从磁盘中读取出来，而是以页为单位，整体读入内存



##### 数据库的I/O操作的最小单位是页，InnoDB数据页的默认大小是16KB。

![image-20220701145100801](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220701145100801.png)

###### 在File Header中有两个指针，分别指向上一个数据页和下一个数据页，相当于一个双向链表。



#### 1、怎么存储记录行的？

![image-20220701145219616](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220701145219616.png)

##### 数据页中的记录按照【主键】顺序组成单向链表	

###### 1）将一个【页】的记录分为几组，包含最小记录和最大记录

###### 2）每个记录组的最后一条记录就是组内最大的那条记录，并且最后一条记录的头信息会记录组内一共有几条记录（n_owned字段，粉红色标注）

###### 3）页目录用来存储每组最后一条记录的地址偏移量，这些地址偏移量按照先后顺序存储起来，每组的地址偏移量也称为槽（slot），每个槽相当于指向了每组的最后一条记录

##### 可以看到，页目录就是由多个槽（slot）组成，槽相当于分组记录的索引



#### 2、B+树是怎么进行查询的？

##### InnoDB里的B+树中的每个节点都是一个数据页：

![image-20220701145642063](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220701145642063.png)

##### 看到B+树的特点：

###### 1）只有叶子节点会存放数据，非叶子节点仅用来存放目录项作为索引

###### 2）非叶子节点分为不同层次，通过分层来降低每一层的搜索量

###### 3）所有节点按索引键大小排序，构成一个双向链表