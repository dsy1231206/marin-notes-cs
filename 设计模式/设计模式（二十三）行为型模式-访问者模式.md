# 设计模式（二十三）行为型模式-访问者模式

###### 封装一些作用于某种数据结构中的各元素的操作，它可以在不改变这个数据结构的前提下，定义作用于这些元素的新的操作

##### 结构

抽象访问者：定义了对每一个元素访问的行为，它的参数就是可以访问的元素，可以看出他的方法数和元素个数是一样的，访问者模式要求元素类的个数不能改变。

具体访问者：给出对每一个元素类访问时产生的具体行为

抽象元素：定义了一个接受访问者的方法（accept），每一个元素都可以被访问者访问

具体元素：提供接受访问方法的具体实现

对象结构：定义当中所提到的对象结构，可以理解成一个具有容器性质或者复合对象特性的类，它会包含一组元素，并且可以迭代这些元素



##### 案例

![image-20220628094127799](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220628094127799.png)

这里的抽象访问者就是Person，并且访问元素的方法和元素的实现类个数相同，抽象元素就是Animal，里面有accept方法



##### 优点

1、扩展性好，可以在不修改元素的情况下，为对象结构中的元素添加新的功能

2、复用性好

通过访问者来定义整个对象结构通用的功能

3、分离无关行为

让不同的子类来实现不同的访问功能，将抽象访问类的方法定义得再通用一点



##### 缺点

1、对象结构变化很困难，每增加一个新的元素类，就要给每一个访问者增加相应的操作

2、违反了依赖倒置原则



